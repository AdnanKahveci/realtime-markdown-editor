**ğŸ“ CURSOR_RULES.md**  
```markdown
# ğŸ–±ï¸ GerÃ§ek ZamanlÄ± Ä°mleÃ§ Senkronizasyonu KurallarÄ±  

---

## ğŸ”„ Veri AkÄ±ÅŸÄ± MekaniÄŸi  
1. **KullanÄ±cÄ± Hareketi AlgÄ±lama**  
   - CodeMirror'un `cursorActivity` event'i ile anlÄ±k pozisyon takibi.  
   - DeÄŸiÅŸiklikler 200ms debounce ile sunucuya gÃ¶nderilir.  

2. **Supabase Realtime Abonelik**  
   - `cursors` tablosuna abone olunarak diÄŸer kullanÄ±cÄ±larÄ±n hareketleri dinlenir:  
   ```typescript
   const subscription = supabase
     .channel('room-cursors')
     .on('postgres_changes', { event: '*', schema: 'public', table: 'cursors' }, handleCursorUpdate)
     .subscribe();
   ```

---

## âš ï¸ Ã‡akÄ±ÅŸma YÃ¶netimi  
- **Son GÃ¼ncelleme Zaman DamgasÄ±**  
  AynÄ± kullanÄ±cÄ±dan gelen eski veriler (timestamp kontrolÃ¼ ile) ignore edilir.  

- **Atomic Updates**  
  Ä°mleÃ§ pozisyonlarÄ± ayrÄ± satÄ±rlarda gÃ¼ncellenir, Ã§akÄ±ÅŸma riski yoktur.  

---

## ğŸ¨ Renk YÃ¶netimi  
- **KullanÄ±cÄ± BazlÄ± Renk**  
  ```typescript
  const color = `hsl(${hash(userId) % 360}, 70%, 60%)`;
  ```
- **LocalStorage'da Saklama**  
  KullanÄ±cÄ± yeniden katÄ±ldÄ±ÄŸÄ±nda aynÄ± renk korunur.  

---

## ğŸ—‚ï¸ Supabase Tablo TasarÄ±mÄ±  
**1. `rooms` Tablosu**  
```sql
CREATE TABLE rooms (
  id UUID PRIMARY KEY,
  created_at TIMESTAMPTZ DEFAULT NOW()
);
```

**2. `cursors` Tablosu**  
```sql
CREATE TABLE cursors (
  user_id UUID REFERENCES auth.users,
  room_id UUID REFERENCES rooms(id),
  position JSONB NOT NULL,
  updated_at TIMESTAMPTZ DEFAULT NOW(),
  PRIMARY KEY (user_id, room_id)
);
```

**3. RLS (Row Level Security)**  
```sql
-- Sadece oda Ã¼yeleri imleÃ§ gÃ¶rebilir
CREATE POLICY "Cursor visibility" ON cursors 
FOR SELECT USING (
  EXISTS(SELECT 1 FROM room_members WHERE room_id = cursors.room_id AND user_id = auth.uid())
);
```

---

## ğŸ”’ GÃ¼venlik KurallarÄ±  
1. **Odaya EriÅŸim KontrolÃ¼**  
   - `/room/:id` route'una eriÅŸim iÃ§in JWT'de `room_id` claim kontrolÃ¼.  

2. **Anonim KullanÄ±cÄ±lar**  
   - LocalStorage'da `guest_` prefixli geÃ§ici ID Ã¼retilir.  

3. **Rate Limiting**  
   - Max 10 imleÃ§ gÃ¼ncellemesi/saniye kullanÄ±cÄ± baÅŸÄ±na.  
```

---

**ğŸ“‚ Dosya Konumu:**  
```
â””â”€â”€ project-root/
    â”œâ”€â”€ backend/
    â”œâ”€â”€ frontend/
```  

Bu yapÄ± Supabase'in real-time Ã¶zellikleriyle tam uyumludur. ğŸš€